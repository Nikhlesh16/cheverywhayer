# ========================================
# VERCEL FRONTEND + SUPABASE DB + UPSTASH REDIS
# ========================================

# ------------------
# FRONTEND (Vercel)
# ------------------
# Add these in Vercel Dashboard > Settings > Environment Variables

NEXT_PUBLIC_API_URL=https://your-backend.up.railway.app
NEXT_PUBLIC_WS_URL=https://your-backend.up.railway.app
NODE_ENV=production

# ------------------
# BACKEND (Railway/Render/Fly.io)
# ------------------

# Supabase PostgreSQL (Free tier: 500MB database, unlimited API requests)
# Get from: Supabase Dashboard > Project Settings > Database > Connection String
# Format: postgresql://postgres:[password]@db.[project-ref].supabase.co:5432/postgres
DATABASE_URL=postgresql://postgres:your-password@db.xxxxxxxxxxxx.supabase.co:5432/postgres

# Upstash Redis (Free tier: 10,000 commands/day)
# Get from: Upstash Console > Database > REST API > .env
# Format: rediss://default:[password]@[region].upstash.io:[port]
# IMPORTANT: Use rediss:// (with double 's') for TLS connection
REDIS_URL=rediss://default:your-password@us1-capital-firefly-12345.upstash.io:6379

# JWT Secret (generate with: openssl rand -base64 32)
JWT_SECRET=your-production-secret-change-this
JWT_EXPIRATION=7d

# Server Configuration
PORT=3001
NODE_ENV=production

# CORS (allow Vercel domains and wildcards for preview deployments)
CORS_ORIGINS=https://your-app.vercel.app,https://your-app-*.vercel.app,https://*.vercel.app

# H3 Configuration
H3_RESOLUTION=8

# ------------------
# DEPLOYMENT STEPS
# ------------------
# 1. SUPABASE SETUP:
#    - Create account at supabase.com
#    - Create new project (select closest region)
#    - Go to Settings > Database
#    - Copy "Connection string" and replace [password] with your database password
#    - Enable "Use connection pooling" for better performance
#
# 2. UPSTASH REDIS SETUP:
#    - Create account at upstash.com
#    - Create new database (select closest region)
#    - Copy the REDIS_URL from .env section
#    - Note: Use rediss:// (TLS) not redis://
#
# 3. BACKEND DEPLOYMENT (Railway):
#    - Create Railway project
#    - Deploy backend code
#    - Add DATABASE_URL and REDIS_URL as environment variables
#    - Add other variables above
#    - Railway will auto-deploy on push
#
# 4. FRONTEND DEPLOYMENT (Vercel):
#    - Import repo to Vercel
#    - Set Root Directory to "frontend"
#    - Add NEXT_PUBLIC_API_URL with Railway URL
#    - Deploy
#
# ------------------
# ADVANTAGES OF THIS STACK
# ------------------
# ✅ Supabase: Generous free tier, auto-backups, built-in auth
# ✅ Upstash: Durable Redis, REST API fallback, global replication
# ✅ Vercel: Fast CDN, automatic HTTPS, preview deployments
# ✅ Railway: Simple deployment, automatic SSL, vertical scaling
# ✅ All services have free tiers suitable for prototypes/MVPs
